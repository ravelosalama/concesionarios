----------------------------------------------------------------------------
--                                                                        --
-- Fecha        : 06/07/2016                                              --
-- Descripción  : Elimina los CONSTRAINT de algunas tablas de saint y los --
--              : crea  nuevamente SIN  incluir  el  campo  CODSUCU  para --
--              : recuperar el performance la versión 8834.               --
--              :                                                         --
-- Versión      : 1.0                                                     --
-- Desarrollado : Miguel Sagués / GRM Soluciones, C.A.                    --
--                                                                        --
----------------------------------------------------------------------------


IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAFACT_IX0' AND object_id = OBJECT_ID('SAFACT')) ALTER TABLE SAFACT DROP CONSTRAINT SAFACT_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAITEMFAC_IX0' AND object_id = OBJECT_ID('SAITEMFAC')) ALTER TABLE SAITEMFAC DROP CONSTRAINT SAITEMFAC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SATAXITF_IX0' AND object_id = OBJECT_ID('SATAXITF')) ALTER TABLE SATAXITF DROP CONSTRAINT SATAXITF_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SASEPRFAC_IX0' AND object_id = OBJECT_ID('SASEPRFAC')) ALTER TABLE SASEPRFAC DROP CONSTRAINT SASEPRFAC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SATAXVTA_IX0' AND object_id = OBJECT_ID('SATAXVTA')) ALTER TABLE SATAXVTA DROP CONSTRAINT SATAXVTA_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAIPAVTA_IX0' AND object_id = OBJECT_ID('SAIPAVTA')) ALTER TABLE SAIPAVTA DROP CONSTRAINT SAIPAVTA_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SACOMP_IX0' AND object_id = OBJECT_ID('SACOMP')) ALTER TABLE SACOMP DROP CONSTRAINT SACOMP_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SATAXCOM_IX0' AND object_id = OBJECT_ID('SATAXCOM')) ALTER TABLE SATAXCOM DROP CONSTRAINT SATAXCOM_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAITEMCOM_IX0' AND object_id = OBJECT_ID('SAITEMCOM')) ALTER TABLE SAITEMCOM DROP CONSTRAINT SAITEMCOM_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SATAXITC_IX0' AND object_id = OBJECT_ID('SATAXITC')) ALTER TABLE SATAXITC DROP CONSTRAINT SATAXITC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SASEPRCOM_IX0' AND object_id = OBJECT_ID('SASEPRCOM')) ALTER TABLE SASEPRCOM DROP CONSTRAINT SASEPRCOM_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAPRIMCOM_IX0' AND object_id = OBJECT_ID('SAPRIMCOM')) ALTER TABLE SAPRIMCOM DROP CONSTRAINT SAPRIMCOM_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAOPEI_IX0' AND object_id = OBJECT_ID('SAOPEI')) ALTER TABLE SAOPEI DROP CONSTRAINT SAOPEI_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAITEMOPI_IX0' AND object_id = OBJECT_ID('SAITEMOPI')) ALTER TABLE SAITEMOPI DROP CONSTRAINT SAITEMOPI_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SASEPROPI_IX0' AND object_id = OBJECT_ID('SASEPROPI')) ALTER TABLE SASEPROPI DROP CONSTRAINT SASEPROPI_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAPLANI_IX0' AND object_id = OBJECT_ID('SAPLANI')) ALTER TABLE SAPLANI DROP CONSTRAINT SAPLANI_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAITEMPLANI_IX0' AND object_id = OBJECT_ID('SAITEMPLANI')) ALTER TABLE SAITEMPLANI DROP CONSTRAINT SAITEMPLANI_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAACXC_IX0' AND object_id = OBJECT_ID('SAACXC')) ALTER TABLE SAACXC DROP CONSTRAINT SAACXC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAPAGCXC_IX0' AND object_id = OBJECT_ID('SAPAGCXC')) ALTER TABLE SAPAGCXC DROP CONSTRAINT SAPAGCXC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SATAXCXC_IX0' AND object_id = OBJECT_ID('SATAXCXC')) ALTER TABLE SATAXCXC DROP CONSTRAINT SATAXCXC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAIPACXC_IX0' AND object_id = OBJECT_ID('SAIPACXC')) ALTER TABLE SAIPACXC DROP CONSTRAINT SAIPACXC_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAACXP_IX0' AND object_id = OBJECT_ID('SAACXP')) ALTER TABLE SAACXP DROP CONSTRAINT SAACXP_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SAPAGCXP_IX0' AND object_id = OBJECT_ID('SAPAGCXP')) ALTER TABLE SAPAGCXP DROP CONSTRAINT SAPAGCXP_IX0;
IF EXISTS(SELECT * FROM sys.indexes WHERE name='SATAXCXP_IX0' AND object_id = OBJECT_ID('SATAXCXP')) ALTER TABLE SATAXCXP DROP CONSTRAINT SATAXCXP_IX0;

ALTER TABLE SAFACT WITH NOCHECK ADD CONSTRAINT SAFACT_IX0 PRIMARY KEY CLUSTERED (TIPOFAC,NUMEROD);
ALTER TABLE SAITEMFAC WITH NOCHECK ADD CONSTRAINT SAITEMFAC_IX0 PRIMARY KEY CLUSTERED (TIPOFAC,NUMEROD,NROLINEA,NROLINEAC);
ALTER TABLE SATAXITF WITH NOCHECK ADD CONSTRAINT SATAXITF_IX0 PRIMARY KEY CLUSTERED (TIPOFAC,NUMEROD,NROLINEA,NROLINEAC,CODTAXS);
ALTER TABLE SASEPRFAC WITH NOCHECK ADD CONSTRAINT SASEPRFAC_IX0 PRIMARY KEY CLUSTERED (TIPOFAC,NUMEROD,NROLINEA,NROLINEAC,NROSERIAL);
ALTER TABLE SATAXVTA WITH NOCHECK ADD CONSTRAINT SATAXVTA_IX0 PRIMARY KEY CLUSTERED (TIPOFAC,NUMEROD,CODTAXS);
ALTER TABLE SAIPAVTA WITH NOCHECK ADD CONSTRAINT SAIPAVTA_IX0 PRIMARY KEY CLUSTERED (TIPOFAC,NUMEROD,NROUNICO);
ALTER TABLE SACOMP WITH NOCHECK ADD CONSTRAINT SACOMP_IX0 PRIMARY KEY CLUSTERED (CODPROV,TIPOCOM,NUMEROD);
ALTER TABLE SATAXCOM WITH NOCHECK ADD CONSTRAINT SATAXCOM_IX0 PRIMARY KEY CLUSTERED (CODPROV,TIPOCOM,NUMEROD,CODTAXS);
ALTER TABLE SAITEMCOM WITH NOCHECK ADD CONSTRAINT SAITEMCOM_IX0 PRIMARY KEY CLUSTERED (CODPROV,TIPOCOM,NUMEROD,NROLINEA);
ALTER TABLE SATAXITC WITH NOCHECK ADD CONSTRAINT SATAXITC_IX0 PRIMARY KEY CLUSTERED (CODPROV,TIPOCOM,NUMEROD,NROLINEA,CODTAXS);
ALTER TABLE SASEPRCOM WITH NOCHECK ADD CONSTRAINT SASEPRCOM_IX0 PRIMARY KEY CLUSTERED (CODPROV,TIPOCOM,NUMEROD,NROLINEA,NROSERIAL);
ALTER TABLE SAPRIMCOM WITH NOCHECK ADD CONSTRAINT SAPRIMCOM_IX0 PRIMARY KEY CLUSTERED (CODPROV,TIPOCOM,NUMEROD,NROLINEA);
ALTER TABLE SAOPEI WITH NOCHECK ADD CONSTRAINT SAOPEI_IX0 PRIMARY KEY CLUSTERED (TIPOOPI,NUMEROD);
ALTER TABLE SAITEMOPI WITH NOCHECK ADD CONSTRAINT SAITEMOPI_IX0 PRIMARY KEY CLUSTERED (TIPOOPI,NUMEROD,NROLINEA);
ALTER TABLE SASEPROPI WITH NOCHECK ADD CONSTRAINT SASEPROPI_IX0 PRIMARY KEY CLUSTERED (TIPOOPI,NUMEROD,NROLINEA,NROSERIAL);
ALTER TABLE SAPLANI WITH NOCHECK ADD CONSTRAINT SAPLANI_IX0 PRIMARY KEY CLUSTERED (NUMEROD);
ALTER TABLE SAITEMPLANI WITH NOCHECK ADD CONSTRAINT SAITEMPLANI_IX0 PRIMARY KEY CLUSTERED (NUMEROD,NROLINEA);
ALTER TABLE SAACXC WITH NOCHECK ADD CONSTRAINT SAACXC_IX0 PRIMARY KEY CLUSTERED (CODCLIE,NROUNICO);
ALTER TABLE SAPAGCXC WITH NOCHECK ADD CONSTRAINT SAPAGCXC_IX0 PRIMARY KEY CLUSTERED (NROPPAL,NROUNICO);
ALTER TABLE SATAXCXC WITH NOCHECK ADD CONSTRAINT SATAXCXC_IX0 PRIMARY KEY CLUSTERED (NROPPAL,NROUNICO,CODTAXS);
ALTER TABLE SAIPACXC WITH NOCHECK ADD CONSTRAINT SAIPACXC_IX0 PRIMARY KEY CLUSTERED (NROPPAL,NROUNICO);
ALTER TABLE SAACXP WITH NOCHECK ADD CONSTRAINT SAACXP_IX0 PRIMARY KEY CLUSTERED (CODPROV,NROUNICO);
ALTER TABLE SAPAGCXP WITH NOCHECK ADD CONSTRAINT SAPAGCXP_IX0 PRIMARY KEY CLUSTERED (NROPPAL,NROUNICO);
ALTER TABLE SATAXCXP WITH NOCHECK ADD CONSTRAINT SATAXCXP_IX0 PRIMARY KEY CLUSTERED (NROPPAL,NROUNICO,CODTAXS);